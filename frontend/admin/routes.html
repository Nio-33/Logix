<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#044595",
              "background-light": "#f5f7f8",
              "background-dark": "#0f1823",
            },
            fontFamily: {
              display: ["Inter"],
            },
            borderRadius: {
              DEFAULT: "0.25rem",
              lg: "0.5rem",
              xl: "0.75rem",
              full: "9999px",
            },
          },
        },
      };
    </script>
<title>Logix - Routes</title>
</head>
<body class="font-display bg-background-light dark:bg-background-dark">
<div class="flex min-h-screen w-full flex-col">
<header class="flex items-center justify-between whitespace-nowrap border-b border-primary/10 px-6 py-3">
<div class="flex items-center gap-8">
<div class="flex items-center gap-2 text-background-dark dark:text-background-light">
<span class="material-symbols-outlined text-primary text-3xl">
              route
            </span>
<h1 class="text-background-dark dark:text-background-light text-xl font-bold">
              Logix
            </h1>
</div>
<nav class="hidden items-center gap-6 md:flex">
<a class="text-sm font-medium text-background-dark/60 dark:text-background-light/60 hover:text-primary" href="/admin">Dashboard</a>
<a class="text-sm font-medium text-background-dark/60 dark:text-background-light/60 hover:text-primary" href="/admin/orders">Orders</a>
<a class="text-sm font-medium text-background-dark/60 dark:text-background-light/60 hover:text-primary" href="/admin/inventory">Inventory</a>
<a class="text-sm font-bold text-primary dark:text-primary" href="/admin/routes">Routes</a>
<a class="text-sm font-medium text-background-dark/60 dark:text-background-light/60 hover:text-primary" href="/admin/customers">Customers</a>
<a class="text-sm font-medium text-background-dark/60 dark:text-background-light/60 hover:text-primary" href="/admin/reports">Reports</a>
</nav>
</div>
<div class="flex items-center gap-4">
<button class="flex items-center justify-center rounded-full size-10 bg-primary/10 text-primary hover:bg-primary/20">
<span class="material-symbols-outlined"> search </span>
</button>
<div class="relative">
<button class="flex items-center justify-center rounded-full size-10 bg-primary/10 text-primary hover:bg-primary/20" onclick="toggleNotifications()">
<svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
<path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
</svg>
<span class="absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white">5</span>
</button>
<div id="notificationDropdown" class="absolute right-0 mt-2 w-80 sm:w-96 bg-background-light dark:bg-background-dark border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg overflow-hidden hidden">
<div class="p-4 border-b border-gray-200 dark:border-gray-700">
<h3 class="text-lg font-semibold text-gray-800 dark:text-white">Notifications</h3>
</div>
<div class="divide-y divide-gray-200 dark:divide-gray-700">
<div class="p-4 flex items-start gap-4 hover:bg-primary/5 dark:hover:bg-primary/10 transition-colors duration-200">
<div class="flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center">
<svg class="h-6 w-6 text-blue-500 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<div class="flex-1">
<p class="text-sm text-gray-800 dark:text-gray-200">New order <span class="font-semibold text-primary">#12345</span> received.</p>
<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">2024-01-20 10:00 AM</p>
</div>
</div>
<div class="p-4 flex items-start gap-4 hover:bg-primary/5 dark:hover:bg-primary/10 transition-colors duration-200">
<div class="flex-shrink-0 w-10 h-10 rounded-full bg-yellow-100 dark:bg-yellow-900/50 flex items-center justify-center">
<svg class="h-6 w-6 text-yellow-500 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<div class="flex-1">
<p class="text-sm text-gray-800 dark:text-gray-200">Shipment for order <span class="font-semibold text-primary">#67890</span> has been delayed.</p>
<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">2024-01-19 03:30 PM</p>
</div>
</div>
<div class="p-4 flex items-start gap-4 hover:bg-primary/5 dark:hover:bg-primary/10 transition-colors duration-200">
<div class="flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/50 flex items-center justify-center">
<svg class="h-6 w-6 text-green-500 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<div class="flex-1">
<p class="text-sm text-gray-800 dark:text-gray-200">Order <span class="font-semibold text-primary">#112233</span> was successfully delivered.</p>
<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">2024-01-18 09:15 AM</p>
</div>
</div>
<div class="p-4 flex items-start gap-4 hover:bg-primary/5 dark:hover:bg-primary/10 transition-colors duration-200">
<div class="flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/50 flex items-center justify-center">
<svg class="h-6 w-6 text-red-500 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
<path clip-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.21 3.03-1.742 3.03H4.42c-1.532 0-2.492-1.696-1.742-3.03l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-4a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" fill-rule="evenodd"></path>
</svg>
</div>
<div class="flex-1">
<p class="text-sm text-gray-800 dark:text-gray-200">Low stock alert for product <span class="font-semibold text-gray-900 dark:text-white">"Heavy Duty Pallet Jack"</span>.</p>
<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">2024-01-17 05:45 PM</p>
</div>
</div>
<div class="p-4 flex items-start gap-4 hover:bg-primary/5 dark:hover:bg-primary/10 transition-colors duration-200">
<div class="flex-shrink-0 w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center">
<svg class="h-6 w-6 text-indigo-500 dark:text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.546-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
</div>
<div class="flex-1">
<p class="text-sm text-gray-800 dark:text-gray-200">A new customer inquiry has been received.</p>
<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">2024-01-16 11:00 AM</p>
</div>
</div>
</div>
<div class="p-2 border-t border-gray-200 dark:border-gray-700 bg-background-light/50 dark:bg-background-dark/50">
<a class="block w-full text-center text-sm font-medium text-primary hover:underline" href="#">View all notifications</a>
</div>
</div>
</div>
<div class="size-10 rounded-full bg-cover bg-center cursor-pointer" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuChB6xVyoRvZUPT5TGYOMl66Cd6z2QTmahdVWM30Wl5bFGWuc1EU2fiBg-Uw28q7pM5O85kfNsw3haEvQpMx4p56MfoD5CHuepL_QC734wfj04MBHM7_km5pZAJ-wrALzaC_i9uua6xiETTS8Twsqb3OxD-Xt0D1LaoloNcB8wgBx0waH5LhpoHG-rlOR_vOZvv2i91wTC4DmphUT7lkGuEab2SAZropk9nV2qNQz_hnV4Kz27duBt1H6TVvlTiqtuywS8Wp6nUYRXX");' onclick="window.location.href='/admin/profile'"></div>
</div>
</header>
<main class="flex flex-1">
<div class="flex w-96 flex-col border-r border-primary/10 bg-background-light dark:bg-background-dark">
<div class="p-4">
<h2 class="text-2xl font-bold text-background-dark dark:text-background-light px-2">
              Routes
            </h2>
<div class="relative mt-4">
<span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-background-dark/40 dark:text-background-light/40">
                search
              </span>
<input class="w-full rounded-lg border-primary/20 bg-background-light dark:bg-background-dark py-2 pl-10 pr-4 text-background-dark dark:text-background-light placeholder-background-dark/40 dark:placeholder-background-light/40 focus:border-primary focus:ring-primary" placeholder="Search routes" type="text"/>
</div>
</div>
<div class="flex-1 overflow-y-auto">
<ul class="divide-y divide-primary/10">
<li class="flex cursor-pointer items-center justify-between p-4 hover:bg-primary/5 dark:hover:bg-primary/10">
<div>
<p class="font-semibold text-background-dark dark:text-background-light">
                    Route 1
                  </p>
<p class="text-sm text-background-dark/60 dark:text-background-light/60">
                    123 Main St, Anytown
                  </p>
</div>
<span class="rounded-full bg-green-500/20 px-2 py-1 text-xs font-semibold text-green-700">Active</span>
</li>
<li class="flex cursor-pointer items-center justify-between p-4 hover:bg-primary/5 dark:hover:bg-primary/10">
<div>
<p class="font-semibold text-background-dark dark:text-background-light">
                    Route 2
                  </p>
<p class="text-sm text-background-dark/60 dark:text-background-light/60">
                    456 Oak Ave, Anytown
                  </p>
</div>
<span class="rounded-full bg-blue-500/20 px-2 py-1 text-xs font-semibold text-blue-700">Completed</span>
</li>
<li class="flex cursor-pointer items-center justify-between p-4 hover:bg-primary/5 dark:hover:bg-primary/10">
<div>
<p class="font-semibold text-background-dark dark:text-background-light">
                    Route 3
                  </p>
<p class="text-sm text-background-dark/60 dark:text-background-light/60">
                    789 Pine Ln, Anytown
                  </p>
</div>
<span class="rounded-full bg-yellow-500/20 px-2 py-1 text-xs font-semibold text-yellow-700">Scheduled</span>
</li>
</ul>
</div>
<div class="p-4">
<button class="flex w-full items-center justify-center gap-2 rounded-lg bg-primary py-3 font-semibold text-white transition-opacity hover:opacity-90">
<span class="material-symbols-outlined"> add </span>
<span>Create Route</span>
</button>
</div>
</div>
<div class="relative flex-1">
<div class="absolute inset-0 bg-cover bg-center" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuCA_OApsMeNPW0qCnfYqdePTAXck7-fBh8dhnY-dacBRFzp8RAmr-NX2tvjMXTTwDYD7EKok7UZgQl3YlY6mVneN9bbRz0RIty6tXciqyHN0s6pOIJCOlpXMazp9xmyLYFxPxNyKdE8MGgTSQhJMl2OgloB1KeWFW_nO8E012D0KsJMI2-Ne0OPs1Fh_x2Uk3pOoRhMgfNOv0sB_g_SDsMIWVBeThcT7NpZaJt2Hw38H8g13Wmr1giTobGd1qseMQUve1G9d0AXEou8");'></div>
<div class="absolute inset-0 bg-black/10"></div>
<div class="relative flex h-full flex-col justify-between p-4 sm:p-6">
<div class="flex items-center justify-between">
<div class="relative w-full max-w-sm">
<span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-background-dark/60">
                  search
                </span>
<input class="w-full rounded-lg border-none bg-background-light/80 py-3 pl-10 pr-4 text-background-dark placeholder-background-dark/60 shadow-lg backdrop-blur-sm focus:ring-2 focus:ring-primary dark:bg-background-dark/80 dark:text-background-light dark:placeholder-background-light/60" placeholder="Search location" type="text"/>
</div>
<button class="flex items-center justify-center gap-2 rounded-lg bg-primary px-4 py-3 font-semibold text-white shadow-lg transition-opacity hover:opacity-90">
<span class="material-symbols-outlined"> add </span>
<span class="hidden sm:inline">New Route</span>
</button>
</div>
<div class="flex items-end justify-end gap-4">
<div class="flex flex-col gap-1 rounded-lg bg-background-light/80 shadow-lg backdrop-blur-sm dark:bg-background-dark/80">
<button class="flex size-12 items-center justify-center text-background-dark hover:bg-primary/10 dark:text-background-light dark:hover:bg-primary/20 rounded-t-lg">
<span class="material-symbols-outlined"> add </span>
</button>
<button class="flex size-12 items-center justify-center text-background-dark hover:bg-primary/10 dark:text-background-light dark:hover:bg-primary/20 rounded-b-lg">
<span class="material-symbols-outlined"> remove </span>
</button>
</div>
<button class="flex size-12 items-center justify-center rounded-lg bg-background-light/80 text-background-dark shadow-lg backdrop-blur-sm hover:bg-primary/10 dark:bg-background-dark/80 dark:text-background-light dark:hover:bg-primary/20">
<span class="material-symbols-outlined"> my_location </span>
</button>
</div>
</div>
</div>
</main>
</div>

<script>
  // Route search functionality
  // Load routes from backend API
  async function loadRoutes() {
    console.log('ðŸ—ºï¸ Loading routes from backend API...');
    try {
      const response = await window.authGuard.fetch('/api/v1/routes/active', {
        method: 'GET'
      });
      
      if (!response.ok) {
        throw new Error('Failed to load routes');
      }
      
      const data = await response.json();
      console.log('âœ… Routes loaded from API:', data);
      
      // Display routes on the map/list
      displayRoutes(data.routes || []);
      
    } catch (error) {
      console.error('âŒ Failed to load routes:', error);
      console.log('ðŸ“ No backend route data available - map view is placeholder');
    }
  }
  
  function displayRoutes(routes) {
    if (routes.length === 0) {
      console.log('ðŸ“ No active routes found');
      return;
    }
    
    console.log(`ðŸ“ Displaying ${routes.length} routes on map`);
    // This would integrate with Google Maps or Mapbox to show routes
    // For now, just log the routes
    routes.forEach(route => {
      console.log(`Route ${route.route_id}: Driver ${route.driver_id}, ${route.stops?.length || 0} stops, Status: ${route.status}`);
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    // Load routes on page load
    loadRoutes();
    const routeSearchInput = document.querySelector('input[placeholder="Search routes"]');
    const locationSearchInput = document.querySelector('input[placeholder="Search location"]');
    
    // Route search functionality
    if (routeSearchInput) {
      routeSearchInput.addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        const routeItems = document.querySelectorAll('ul li');
        
        routeItems.forEach(item => {
          const routeName = item.querySelector('p').textContent.toLowerCase();
          const routeAddress = item.querySelector('p + p').textContent.toLowerCase();
          
          if (routeName.includes(searchTerm) || routeAddress.includes(searchTerm)) {
            item.style.display = 'flex';
          } else {
            item.style.display = 'none';
          }
        });
      });
    }
    
    // Location search functionality
    if (locationSearchInput) {
      locationSearchInput.addEventListener('input', function(e) {
        // This would integrate with a map service like Google Maps or Mapbox
        console.log('Searching for location:', e.target.value);
      });
    }
    
    // Create Route button functionality
    const createRouteButtons = document.querySelectorAll('button');
    createRouteButtons.forEach(button => {
      if (button.textContent.includes('Create Route') || button.textContent.includes('New Route')) {
        button.addEventListener('click', function() {
          alert('Create Route functionality would be implemented here');
        });
      }
    });
    
    // Map controls functionality
    const zoomInButton = document.querySelector('button .material-symbols-outlined');
    const zoomOutButton = document.querySelectorAll('button .material-symbols-outlined')[1];
    const locationButton = document.querySelector('button .material-symbols-outlined:last-child');
    
    if (zoomInButton && zoomInButton.textContent.trim() === 'add') {
      zoomInButton.parentElement.addEventListener('click', function() {
        console.log('Zoom in');
      });
    }
    
    if (zoomOutButton && zoomOutButton.textContent.trim() === 'remove') {
      zoomOutButton.parentElement.addEventListener('click', function() {
        console.log('Zoom out');
      });
    }
    
    if (locationButton && locationButton.textContent.trim() === 'my_location') {
      locationButton.parentElement.addEventListener('click', function() {
        console.log('Center on location');
      });
    }
  });

  function toggleNotifications() {
    const dropdown = document.getElementById('notificationDropdown');
    dropdown.classList.toggle('hidden');
  }

  // Close dropdown when clicking outside
  document.addEventListener('click', function(event) {
    const dropdown = document.getElementById('notificationDropdown');
    const button = event.target.closest('button[onclick="toggleNotifications()"]');
    
    if (!button && !dropdown.contains(event.target)) {
      dropdown.classList.add('hidden');
    }
  });
</script>
<script src="/shared/utils/auth-guard.js"></script>
<script src="/shared/utils/theme-manager.js"></script>

</body></html>
